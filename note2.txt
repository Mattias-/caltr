"static"-ish:
    calculate distance between stops
    for each train
        calc speed between stops
----
every minute:
get new active trains and run them


run active trains as threads

activeTrain
    lastStop
    nextStop
    timeToNext
    pos
    timeBetweenStops
    tic()
        fractionTravelled = 1 - (timeToNext / timeBetweenStops) 
        timeToNext = nextStopTime-currentTime
        pos = getPos(lastStop, nextStop, fractionTravelled)
        if fractionTravelled >= 1
            atStop()
    atStop()
        update last
        if lastStop == endStop
            remove from active trains
            delete self
        update next,
        update timeToNext
        sleep(stopStayTime)
        timeBetweenStops = nextStopTime - currentTime
        timeToNext = timeBetweenStops



isActive(train)
    get time first stop
    get time last stop
    if current time <

getPos(frac, from, to)
    find from
    for i= from; i<=to;i++
        dist[i] = dist(wp[i],wp[i+1})
        tot = dist[i]
   for sum[i] + sum[i+1] < frac*tot 



wps = {
[
{lat,
lng}
],
stops ={
    "So SF": 2,
    "San F": 0
}
}

TODO create js packages, format, refactor
